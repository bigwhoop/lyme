/*! LYME v1.3.0 (2014-09-26) with Markdown Extra and scroll_to plugin | http://bigwhoop.github.io/lyme | MIT License */

/**
 * The following libraries are included in this file:
 *
 * - JS Markdown Extra, Copyright (c) 2006 js-markdown-extra developers, https://github.com/tanakahisateru/js-markdown-extra
 */

function Markdown(text){var parser;return"undefined"==typeof arguments.callee.parser?(parser=eval("new "+MARKDOWN_PARSER_CLASS+"()"),parser.init(),arguments.callee.parser=parser):parser=arguments.callee.parser,parser.transform(text)}function Markdown_Parser(){this.nested_brackets_depth=6,this.nested_url_parenthesis_depth=4,this.escape_chars="\\\\`*_{}[]()>#+-.!",this.document_gamut=[["stripLinkDefinitions",20],["runBasicBlockGamut",30]],this.block_gamut=[["doHeaders",10],["doHorizontalRules",20],["doLists",40],["doCodeBlocks",50],["doBlockQuotes",60]],this.span_gamut=[["parseSpan",-30],["doImages",10],["doAnchors",20],["doAutoLinks",30],["encodeAmpsAndAngles",40],["doItalicsAndBold",50],["doHardBreaks",60]],this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?!_)"]],this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?!_)"]],this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?!_)"]]}function MarkdownExtra_Parser(){this.fn_id_prefix="",this.fn_link_title=MARKDOWN_FN_LINK_TITLE,this.fn_backlink_title=MARKDOWN_FN_BACKLINK_TITLE,this.fn_link_class=MARKDOWN_FN_LINK_CLASS,this.fn_backlink_class=MARKDOWN_FN_BACKLINK_CLASS,this.predef_abbr={},this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.footnote_counter=1,this.block_tags_re="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|form|fieldset|iframe|hr|legend",this.context_block_tags_re="script|noscript|math|ins|del",this.contain_span_tags_re="p|h[1-6]|li|dd|dt|td|th|legend|address",this.clean_tags_re="script|math",this.auto_close_tags_re="hr|img",this.em_relist=[["","(?:(^|[^\\*])(\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(_)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["*","((?:\\S|^)[^\\*])(\\*)(?!\\*)"],["_","((?:\\S|^)[^_])(_)(?![a-zA-Z0-9_])"]],this.strong_relist=[["","(?:(^|[^\\*])(\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(__)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["**","((?:\\S|^)[^\\*])(\\*\\*)(?!\\*)"],["__","((?:\\S|^)[^_])(__)(?![a-zA-Z0-9_])"]],this.em_strong_relist=[["","(?:(^|[^\\*])(\\*\\*\\*)(?=[^\\*])|(^|[^a-zA-Z0-9_])(___)(?=[^_]))(?=\\S|$)(?![\\.,:;]\\s)"],["***","((?:\\S|^)[^\\*])(\\*\\*\\*)(?!\\*)"],["___","((?:\\S|^)[^_])(___)(?![a-zA-Z0-9_])"]],this.escape_chars+=":|",this.document_gamut.push(["doFencedCodeBlocks",5]),this.document_gamut.push(["stripFootnotes",15]),this.document_gamut.push(["stripAbbreviations",25]),this.document_gamut.push(["appendFootnotes",50]),this.block_gamut.push(["doFencedCodeBlocks",5]),this.block_gamut.push(["doTables",15]),this.block_gamut.push(["doDefLists",45]),this.span_gamut.push(["doFootnotes",5]),this.span_gamut.push(["doAbbreviations",70])}$.fn.lyme=function(a){var b={markup:"",onMarkupChange:null,onPreInit:null,onPostInit:null,renderer:new $.fn.lyme.renderers.JSMarkdownExtra,plugins:[new $.fn.lyme.plugins.ScrollTo,new $.fn.lyme.plugins.Blink],hotKeys:$.fn.lyme.hotKeys},c=$.extend(b,a);if(c.markup instanceof $){var d=c.markup;c.plugins.push(new $.fn.lyme.plugins.TextareaAdapter(d))}c.plugins.forEach(function(a){$.isFunction(a.onGetMarkup)&&(c.markup=a.onGetMarkup())});var e={};if($.each(["onMarkupChange","onPreInit","onPostInit"],function(){$.isFunction(c[this])&&(e[this]=c[this])}),c.plugins.push(e),1==this.length)return new $.fn.lyme.Editor($(this),c);var f={};return this.each(function(){f[this.selector]=new $.fn.lyme.Editor($(this),c)}),f},$.fn.lyme.Editor=function(a,b){function c(){a.on("click",function(a){a.stopPropagation()}),$(document).on("click",function(){f.hideEditor()}),b.plugins.forEach(function(a){$.isFunction(a.setEditor)&&a.setEditor(f)}),d("onPreInit",[a,b]),f.setMarkup(b.markup),d("onPostInit",[f.getFullMarkup(),f.getFullHTML()])}function d(a,c){$.isArray(c)||(c=[]),b.plugins.forEach(function(b){$.isFunction(b[a])&&b[a].apply(f,c)})}function e(){return g++}var f=this;f.setRenderer=function(a){b.renderer=a},f.splitMarkup=function(a){return $.isFunction(b.renderer.split)?b.renderer.split(a):a.replace(/\r/g,"").replace(/\n\n\n/g,"\n\n").split("\n\n")},f.joinMarkup=function(a){return $.isFunction(b.renderer.join)?b.renderer.join(a):a.join("\n\n")};var g=0;f.createBlock=function(a,c){function g(a){var c=k.val(),e=i;return $.each(f.splitMarkup(c),function(a,c){var d=b.renderer.render(c);if(0==a)k.val(c),l.html(d);else{var g=f.createBlock(c,d);e.after(g.getElement()),e=g.getElement()}}),a!=c&&d("onMarkupChange",[f.getFullMarkup(),f.getFullHTML()]),c}c||(c=b.renderer.render(a));var h=e(),i=$('<div id="lyme-block-'+h+'" class="lyme-block">'),j=$('<div class="markup"></div>'),k=$("<textarea></textarea>"),l=$('<div class="preview"></div>');k.val(a),l.html(c),j.hide().append(k),i.append(j).append(l);var m=new $.fn.lyme.Block(i);return k.on("focusout",function(){d("onPreStopEditing",[m]),""==k.val()&&i.remove(),a=g(a),d("onPostStopEditing",[m])}),k.on("keydown",function(a){for(var c in b.hotKeys){var d=b.hotKeys[c];d.if(a)&&(a.preventDefault(),d.do(f,m))}}),l.on("click",function(){f.hideEditor(),d("onPreStartEditing",[m]),l.hide(),j.show(),k.focus(),d("onPostStartEditing",[m])}),m},f.getFullMarkup=function(){var b=[];return a.find(".lyme-block .markup textarea").each(function(){b.push($(this).val())}),f.joinMarkup(b)},f.getFullHTML=function(){return b.renderer.render(f.getFullMarkup())},f.setMarkup=function(b){a.empty(),$.each(f.splitMarkup(b),function(b,c){var d=f.createBlock(c);a.append(d.getElement())})},f.getElement=function(){return a},f.hideEditor=function(){a.find(".lyme-block .markup:visible textarea:focus").blur(),a.find(".lyme-block .markup:visible").hide(),a.find(".lyme-block .preview").show()},c()},$.fn.lyme.Block=function(a){this.edit=function(){a.find(".preview").trigger("click")},this.getPreviousBlock=function(){var b=a.prev();return b.length?new $.fn.lyme.Block(b):!1},this.getNextBlock=function(){var b=a.next();return b.length?new $.fn.lyme.Block(b):!1},this.getMarkup=function(){return a.find("textarea").val()},this.setMarkup=function(b){a.find("textarea").val(b)},this.getElement=function(){return a}},$.fn.lyme.renderers={JSMarkdownExtra:function(){var a;this.render=function(b){return a||(a=new MarkdownExtra_Parser,a.init()),a.transform(b)},this.split=function(a){a=a.replace(/\r/g,"");var b=new RegExp("(?:~{3,}[ ]*\n[^]*?\n~{3,})+","g"),c=[];a.replace(b,function(b){var d="_LYME_PLACEHOLDER_"+c.length+"_";a=a.replace(b,d),c.push(b)});var d=a.replace(/\n\n\n/g,"\n\n").split("\n\n");for(var e in c)$.each(d,function(a,b){b=="_LYME_PLACEHOLDER_"+e+"_"&&(d[a]=c[e])});return d}},Showdown:function(){var a;this.render=function(b){return a||(a=new Showdown.converter),a.makeHtml(b)}}},$.fn.lyme.hotKeys={tabbing:{indentation:"    ","if":function(a){return 9==a.keyCode},"do":function(a,b){var c=b.getElement().find("textarea").get(0),d=c.selectionStart;c.value=c.value.substring(0,c.selectionStart)+this.indentation+c.value.substring(c.selectionEnd,c.value.length),setTimeout(function(){c.focus(),c.setSelectionRange(d+4,d+4)},0)}},escape:{"if":function(a){return 27==a.keyCode},"do":function(a){a.hideEditor()}},"place-before":{"if":function(a){return a.altKey&&a.ctrlKey&&a.shiftKey&&38==a.keyCode},"do":function(a,b){var c=b.getPreviousBlock();if(c){var d=b.getMarkup(),e=c.getMarkup();b.setMarkup(e),c.setMarkup(d),c.edit()}}},"place-after":{"if":function(a){return a.altKey&&a.ctrlKey&&a.shiftKey&&40==a.keyCode},"do":function(a,b){var c=b.getNextBlock();if(c){var d=b.getMarkup(),e=c.getMarkup();b.setMarkup(e),c.setMarkup(d),c.edit()}}},"move-up":{"if":function(a){return a.altKey&&a.ctrlKey&&38==a.keyCode},"do":function(a,b){var c=b.getPreviousBlock();c&&c.edit()}},"move-down":{"if":function(a){return a.altKey&&a.ctrlKey&&40==a.keyCode},"do":function(a,b){var c=b.getNextBlock();c&&c.edit()}},"append-empty-block":{"if":function(a){return a.altKey&&a.ctrlKey&&13==a.keyCode},"do":function(a,b){var c=a.createBlock("","");b.getElement().after(c.getElement()),c.edit()}},"remove-block":{"if":function(a){return a.altKey&&a.ctrlKey&&8==a.keyCode},"do":function(a,b){b.setMarkup("");var c=b.getPreviousBlock(),d=b.getNextBlock();c?c.edit():d?d.edit():a.hideEditor()}}},$.fn.lyme.plugins={ContentGuard:function(a,b){var c=!1,a="boolean"==typeof a?a:!0,b="boolean"==typeof b?b:!0;this.enable=function(){b=!0},this.disable=function(){b=!1},a&&$(document).on("submit","form",function(){b=!1}),this.onMarkupChange=function(){c=!0},$(window).bind("beforeunload",function(){return b&&c?"Are you sure you want to leave this page?":void 0})},TextareaAdapter:function(a,b){var c=$(a);this.onGetMarkup=function(){return c.val()},this.onMarkupChange=function(a,d){c.val(b?d:a)}},AjaxAdapter:function(a,b){a&&a.length&&(this.onGetMarkup=function(){var b="Failed to retrieve the from "+a;return $.ajax({url:a,type:"get",success:function(a){b=a},async:!1}),b}),b&&b.length&&(this.onMarkupChange=function(a,c){$.ajax({url:b,data:{markup:a,html:c},type:"post"})})},ScrollTo:function(a,b){$.isNumeric(a)||(a=300),$.isNumeric(b)||(b=50);var c;this.onPreStartEditing=function(d){window.clearTimeout(c),c=window.setTimeout(function(){$("html, body").animate({scrollTop:d.getElement().offset().top-b},750)},a)}},Blink:function(a){a||(a="#FFFBCC");var b=[];this.onPreStopEditing=function(){b=this.getElement().find(".lyme-block .preview:hidden")},this.onPostStopEditing=function(){b.each(function(){var b=$(this),c=b.css("backgroundColor");b.css({opacity:0,backgroundColor:a}),b.animate({opacity:1},200,function(){window.setTimeout(function(){b.css({backgroundColor:c})},600)})})}}},$.fn.lyme.plugins.UndoRedo=function(a){var b;switch(a){case"localStorage":b=new $.fn.lyme.plugins.UndoRedo.LocalStorage;break;case"memory":default:b=new $.fn.lyme.plugins.UndoRedo.MemoryStorage}var c;this.setEditor=function(a){c=a},this.undo=function(){c.setMarkup(b.undo())},this.redo=function(){c.setMarkup(b.redo())},this.onPostInit=function(a){c.setMarkup(b.init(a))},this.onMarkupChange=function(a){b.push(a)}},$.fn.lyme.plugins.UndoRedo.LocalStorage=function(){function a(){localStorage.setItem(b,JSON.stringify(c))}const b="lyme";var c=new $.fn.lyme.plugins.UndoRedo.MemoryStorage,d=localStorage.getItem(b);d&&(persistedStorageObj=JSON.parse(d))&&(c.pointer=persistedStorageObj.pointer,c.entries=persistedStorageObj.entries),this.init=function(b){var d=c.getMarkup();if(d)return d;var e=c.init(b);return a(),e},this.push=function(b){c.push(b),a()},this.undo=function(){var b=c.undo();return a(),b},this.redo=function(){var b=c.redo();return a(),b}},$.fn.lyme.plugins.UndoRedo.MemoryStorage=function(){this.pointer=0,this.entries=[],this.init=function(a){return this.push(a),a},this.push=function(a){this.entries=this.entries.slice(0,this.pointer),this.entries[this.pointer++]=a},this.undo=function(){return this.pointer--,this.pointer<1&&(this.pointer=1),this.getMarkup()},this.redo=function(){return this.pointer++,this.pointer>this.entries.length&&(this.pointer=this.entries.length),this.getMarkup()},this.getMarkup=function(){return this.entries[this.pointer-1]}};var MARKDOWN_VERSION="1.0.1o",MARKDOWNEXTRA_VERSION="1.2.5",MARKDOWN_EMPTY_ELEMENT_SUFFIX=" />",MARKDOWN_TAB_WIDTH=4,MARKDOWN_FN_LINK_TITLE="",MARKDOWN_FN_BACKLINK_TITLE="",MARKDOWN_FN_LINK_CLASS="",MARKDOWN_FN_BACKLINK_CLASS="",MARKDOWN_WP_POSTS=!0,MARKDOWN_WP_COMMENTS=!0;MARKDOWN_PARSER_CLASS="MarkdownExtra_Parser",Markdown_Parser.prototype.init=function(){function a(a,b){return a=a[1],b=b[1],a>b?1:b>a?-1:0}this.prepareItalicsAndBold(),this.nested_brackets_re=this._php_str_repeat("(?:[^\\[\\]]+|\\[",this.nested_brackets_depth)+this._php_str_repeat("\\])*",this.nested_brackets_depth),this.nested_url_parenthesis_re=this._php_str_repeat("(?:[^\\(\\)\\s]+|\\(",this.nested_url_parenthesis_depth)+this._php_str_repeat("(?:\\)))*",this.nested_url_parenthesis_depth);for(var b=[],c=0;c<this.escape_chars.length;c++)b.push(this._php_preg_quote(this.escape_chars.charAt(c)));this.escape_chars_re="["+b.join("")+"]",this.empty_element_suffix=MARKDOWN_EMPTY_ELEMENT_SUFFIX,this.tab_width=MARKDOWN_TAB_WIDTH,this.no_markup=!1,this.no_entities=!1,this.predef_urls={},this.predef_titles={},this.document_gamut.sort(a),this.block_gamut.sort(a),this.span_gamut.sort(a),this.urls={},this.titles={},this.html_hashes={},this.in_anchor=!1},Markdown_Parser.prototype.__wrapSTXETX__=function(a){return""!=a.charAt(0)&&(a=""+a),""!=a.charAt(a.length-1)&&(a+=""),a},Markdown_Parser.prototype.__unwrapSTXETX__=function(a){return""==a.charAt(0)&&(a=a.substr(1)),""==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a},Markdown_Parser.prototype._php_preg_quote=function(a){return arguments.callee.sRE||(arguments.callee.sRE=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}\\)/g),a.replace(arguments.callee.sRE,"\\$1")},Markdown_Parser.prototype._php_str_repeat=function(a,b){for(var c=a,d=1;b>d;d++)c+=a;return c},Markdown_Parser.prototype._php_trim=function(a,b){var c=b||" 	\n\r";return a.replace(new RegExp("^["+c+"]*|["+c+"]*$","g"),"")},Markdown_Parser.prototype._php_rtrim=function(a,b){var c=b||" 	\n\r";return a.replace(new RegExp("["+c+"]*$","g"),"")},Markdown_Parser.prototype._php_htmlspecialchars_ENT_NOQUOTES=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Markdown_Parser.prototype.setup=function(){this.urls=this.predef_urls,this.titles=this.predef_titles,this.html_hashes={},this.in_anchor=!1},Markdown_Parser.prototype.teardown=function(){this.urls={},this.titles={},this.html_hashes={}},Markdown_Parser.prototype.transform=function(a){this.setup(),a=a.replace(/^\xEF\xBB\xBF|\x1A/,""),a=a.replace(/\r\n?/g,"\n",a),a+="\n\n",a=this.detab(a),a=this.hashHTMLBlocks(a),a=a.replace(/^[ ]+$/m,"");for(var b=0;b<this.document_gamut.length;b++){var c=this[this.document_gamut[b][0]];c?a=c.call(this,a):console.log(this.document_gamut[b][0]+" not implemented")}return this.teardown(),a+"\n"},Markdown_Parser.prototype.hashHTMLBlocks=function(a){if(this.no_markup)return a;var b=this.tab_width-1,c="ins|del",d="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|address|script|noscript|form|fieldset|iframe|math",e=4,f='(?:\\s(?:[^>"/]+|/+(?!>)|"[^"]*"|\'[^\']*\')*)?',g=this._php_str_repeat("(?:[^<]+|<\\2"+f+"(?:/>|>",e)+".*?"+this._php_str_repeat("</\\2\\s*>)|<(?!/\\2\\s*>))*",e),h=g.replace("\\2","\\3"),i=new RegExp("(?:(?:(?:\\n\\n)|(?:\\x02)\\n?)([ ]{0,"+b+"}<("+d+")"+f+">"+g+"</\\2>[ ]*(?=\\n+|\\n*\\x03)|[ ]{0,"+b+"}<("+c+")"+f+">[ ]*\\n"+h+"</\\3>[ ]*(?=\\n+|\\n*\\x03)|[ ]{0,"+b+"}<(hr)"+f+"/?>[ ]*(?=\\n{2,}|\\n*\\x03)|[ ]{0,"+b+"}(?:<!--.*?-->)[ ]*(?=\\n{2,}|\\n*\\x03)|[ ]{0,"+b+"}(?:<([?%]).*?\\2>)[ ]*(?=\\n{2,}|\\n*\\x03)))","mig"),j=this;return a=this.__wrapSTXETX__(a),a=a.replace(i,function(a,b){var c=j.hashBlock(b);return"\n\n"+c+"\n\n"}),a=this.__unwrapSTXETX__(a)},Markdown_Parser.prototype.hashPart=function(a,b){"undefined"==typeof b&&(b="X"),a=this.unhash(a),"undefined"==typeof arguments.callee.i&&(arguments.callee.i=0);var c=b+""+ ++arguments.callee.i+b;return this.html_hashes[c]=a,c},Markdown_Parser.prototype.hashBlock=function(a){return this.hashPart(a,"B")},Markdown_Parser.prototype.stripLinkDefinitions=function(a){var b=this.tab_width-1,c=this;return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("^[ ]{0,"+b+'}\\[(.+)\\][ ]?:[ ]*\\n?[ ]*(?:<(.+?)>|(\\S+?))[ ]*\\n?[ ]*(?:["\\(](.*?)["\\)][ ]*)?(?:\\n+|\\n*(?=\\x03))',"mg"),function(a,b,d,e,f){var g=b.toLowerCase(),h=d?d:e;return c.urls[g]=h,c.titles[g]=f,""}),a=this.__unwrapSTXETX__(a)},Markdown_Parser.prototype.runBlockGamut=function(a){return a=this.hashHTMLBlocks(a),this.runBasicBlockGamut(a)},Markdown_Parser.prototype.runBasicBlockGamut=function(a){for(var b=0;b<this.block_gamut.length;b++){var c=this[this.block_gamut[b][0]];c?a=c.call(this,a):console.log(this.block_gamut[b][0]+" not implemented")}return a=this.formParagraphs(a)},Markdown_Parser.prototype.doHorizontalRules=function(a){var b=this;return a.replace(new RegExp("^[ ]{0,3}([-\\*_])(?:[ ]{0,2}\\1){2,}[ ]*$","mg"),function(){return"\n"+b.hashBlock("<hr"+b.empty_element_suffix)+"\n"})},Markdown_Parser.prototype.runSpanGamut=function(a){for(var b=0;b<this.span_gamut.length;b++){var c=this[this.span_gamut[b][0]];c?a=c.call(this,a):console.log(this.span_gamut[b][0]+" not implemented")}return a},Markdown_Parser.prototype.doHardBreaks=function(a){var b=this;return a.replace(/ {2,}\n/gm,function(){return b.hashPart("<br"+b.empty_element_suffix+"\n")})},Markdown_Parser.prototype.doAnchors=function(a){if(this.in_anchor)return a;this.in_anchor=!0;var b=this,c=function(a,c,d,e){("string"!=typeof e||""===e)&&(e=d),e=e.toLowerCase(),e=e.replace(/[ ]?\n/," ");var f;if("undefined"!=typeof b.urls[e]){var g=b.urls[e];if(g=b.encodeAttribute(g),f='<a href="'+g+'"',"undefined"!=typeof b.titles[e]){var h=b.titles[e];h=b.encodeAttribute(h),f+=' title="'+h+'"'}d=b.runSpanGamut(d),f+=">"+d+"</a>",f=b.hashPart(f)}else f=c;return f};return a=a.replace(new RegExp("(\\[("+this.nested_brackets_re+")\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])","mg"),c),a=a.replace(new RegExp("(\\[("+this.nested_brackets_re+")\\]\\([ \\n]*(?:<(.+?)>|("+this.nested_url_parenthesis_re+"))[ \\n]*((['\"])(.*?)\\6[ \\n]*)?\\))","mg"),function(a,c,d,e,f,g,h,i){d=b.runSpanGamut(d);var j=e?e:f;j=b.encodeAttribute(j);var k='<a href="'+j+'"';return"undefined"!=typeof i&&""!==i&&(i=b.encodeAttribute(i),k+=' title="'+i+'"'),d=b.runSpanGamut(d),k+=">"+d+"</a>",b.hashPart(k)}),a=a.replace(new RegExp("(\\[([^\\[\\]]+)\\])","mg"),c),this.in_anchor=!1,a},Markdown_Parser.prototype.doImages=function(a){var b=this;return a=a.replace(new RegExp("(!\\[("+this.nested_brackets_re+")\\][ ]?(?:\\n[ ]*)?\\[(.*?)\\])","mg"),function(a,c,d,e){e=e.toLowerCase(),("string"!=typeof e||""===e)&&(e=d.toLowerCase()),d=b.encodeAttribute(d);var f;if("undefined"!=typeof b.urls[e]){var g=b.encodeAttribute(b.urls[e]);if(f='<img src="'+g+'" alt="'+d+'"',"undefined"!=typeof b.titles[e]){var h=b.titles[e];h=b.encodeAttribute(h),f+=' title="'+h+'"'}f+=b.empty_element_suffix,f=b.hashPart(f)}else f=c;return f}),a=a.replace(new RegExp("(!\\[("+this.nested_brackets_re+")\\]\\s?\\([ \\n]*(?:<(\\S*)>|("+this.nested_url_parenthesis_re+"))[ \\n]*((['\"])(.*?)\\6[ \\n]*)?\\))","mg"),function(a,c,d,e,f,g,h,i){var j=e?e:f;d=b.encodeAttribute(d),j=b.encodeAttribute(j);var k='<img src="'+j+'" alt="'+d+'"';return"undefined"!=typeof i&&""!==i&&(i=b.encodeAttribute(i),k+=' title="'+i+'"'),k+=b.empty_element_suffix,b.hashPart(k)})},Markdown_Parser.prototype.doHeaders=function(a){var b=this;return a=a.replace(/^(.+?)[ ]*\n(=+|-+)[ ]*\n+/gm,function(a,c,d){if("-"==d&&c.match(/^-(?: |$)/))return a;var e="="==d.charAt(0)?1:2,f="<h"+e+">"+b.runSpanGamut(c)+"</h"+e+">";return"\n"+b.hashBlock(f)+"\n\n"}),a=a.replace(new RegExp("^(\\#{1,6})[ ]*(.+?)[ ]*\\#*\\n+","mg"),function(a,c,d){var e=c.length,f="<h"+e+">"+b.runSpanGamut(d)+"</h"+e+">";return"\n"+b.hashBlock(f)+"\n\n"})},Markdown_Parser.prototype.doLists=function(a){for(var b=this.tab_width-1,c="[\\*\\+-]",d="\\d+[\\.]",e=this,f=function(a,b,f,g,h){var i=h.match(c)?"ul":"ol",j="ul"==i?c:d;b+="\n";var k=e.processListItems(b,j);return k=e.hashBlock("<"+i+">\n"+k+"</"+i+">"),"\n"+k+"\n\n"},g=[[c,d],[d,c]],h=0;h<g.length;h++){var i=g[h][0],j=g[h][1],k="((([ ]{0,"+b+"})("+i+")[ ]+)[\\s\\S]+?((?=\\x03)|\\n{2,}(?=\\S)(?![ ]*"+i+"[ ]+)|(?=\\n\\3"+j+"[ ]+)))";a=this.__wrapSTXETX__(a),a=this.list_level?a.replace(new RegExp("^"+k,"mg"),f):a.replace(new RegExp("(?:(?=\\n)\\n|\\x02\\n?)"+k,"mg"),f),a=this.__unwrapSTXETX__(a)}return a},Markdown_Parser.prototype.processListItems=function(a,b){"undefined"==typeof this.list_level&&(this.list_level=0),this.list_level++,a=this.__wrapSTXETX__(a),a=a.replace(/\n{2,}(?=\x03)/m,"\n"),a=this.__unwrapSTXETX__(a);var c=this;return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("(\\n)?([ ]*)("+b+"(?:[ ]+|(?=\\n)))([\\s\\S]*?)(?:(\\n+(?=\\n))|\\n)(?=\\n*(\\x03|\\2("+b+")(?:[ ]+|(?=\\n))))","gm"),function(a,b,d,e,f,g){return b||g||f.match(/\n{2,}/)?(f=d+c._php_str_repeat(" ",e.length)+f,f=c.runBlockGamut(c.outdent(f)+"\n")):(f=c.doLists(c.outdent(f)),f=f.replace(/\n+$/m,""),f=c.runSpanGamut(f)),"<li>"+f+"</li>\n"}),a=this.__unwrapSTXETX__(a),this.list_level--,a},Markdown_Parser.prototype.doCodeBlocks=function(a){var b=this;return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("(?:\\n\\n|(?=\\x02)\\n?)((?:^[ ]{"+this.tab_width+",}.*\\n+)+)((?=[ ]{0,"+this.tab_width+"}\\S)|(?:\\n*(?=\\x03)))","mg"),function(a,c){return c=b.outdent(c),c=b._php_htmlspecialchars_ENT_NOQUOTES(c),c=b.__wrapSTXETX__(c),c=c.replace(/(?=\x02)\n+|\n+(?=\x03)/g,""),c=b.__unwrapSTXETX__(c),c="<pre><code>"+c+"\n</code></pre>","\n\n"+b.hashBlock(c)+"\n\n"}),a=this.__unwrapSTXETX__(a)},Markdown_Parser.prototype.makeCodeSpan=function(a){return a=this._php_htmlspecialchars_ENT_NOQUOTES(this._php_trim(a)),this.hashPart("<code>"+a+"</code>")},Markdown_Parser.prototype.prepareItalicsAndBold=function(){this.em_strong_prepared_relist={};for(var a=0;a<this.em_relist.length;a++)for(var b=this.em_relist[a][0],c=this.em_relist[a][1],d=0;d<this.strong_relist.length;d++){for(var e=this.strong_relist[d][0],f=this.strong_relist[d][1],g=[],h=0;h<this.em_strong_relist.length;h++){var i=this.em_strong_relist[h][0],j=this.em_strong_relist[h][1];b+e==i&&g.push(j)}g.push(c),g.push(f);var k=new RegExp("("+g.join("|")+")");this.em_strong_prepared_relist["rx_"+b+e]=k}},Markdown_Parser.prototype.doItalicsAndBold=function(a){for(var b="",c="",d=!1,e=[""],f=[],g="";;){var h=this.em_strong_prepared_relist["rx_"+b+c],i=a.match(h);if(i){for(var j=RegExp.leftContext,k=RegExp.rightContext,l="",m=i[1],n=2;n<i.length;n+=2)if("undefined"!=typeof i[n]&&""!=i[n]){l=i[n],m=i[n+1];break}e[0]+=j+l,g=m,a=k}else e[0]+=a,g="",a="";if(""==g){for(;f.length>0&&f[0].length>0;){e[1]+=f.shift();var o=e.shift();e[0]+=o}break}var p,q,r=g.length;if(d)3==r?(f.shift(),q=e.shift(),q=this.runSpanGamut(q),q="<strong><em>"+q+"</em></strong>",e[0]+=this.hashPart(q),b="",c=""):(f[0]=this._php_str_repeat(g.charAt(0),3-r),p=2==r?"strong":"em",q=e[0],q=this.runSpanGamut(q),q="<"+p+">"+q+"</"+p+">",e[0]=this.hashPart(q),"strong"==p?c="":b=""),d=!1;else if(3==r)if(""!=b)for(var s=0;2>s;++s){var t=f.shift();p=2==t.length?"strong":"em",q=e.shift(),q=this.runSpanGamut(q),q="<"+p+">"+q+"</"+p+">",e[0]=this.hashPart(q),"strong"==p?c="":b=""}else b=g.charAt(0),c=b+b,f.unshift(g),e.unshift(""),d=!0;else if(2==r)if(""!=c){if(1==f[0].length){e[1]+=f.shift();var o=e.shift();e[0]+=o}f.shift(),q=e.shift(),q=this.runSpanGamut(q),q="<strong>"+q+"</strong>",e[0]+=this.hashPart(q),c=""}else f.unshift(g),e.unshift(""),c=g;else""!=b?1==f[0].length?(f.shift(),q=e.shift(),q=this.runSpanGamut(q),q="<em>"+q+"</em>",e[0]+=this.hashPart(q),b=""):e[0]+=g:(f.unshift(g),e.unshift(""),b=g)}return e[0]},Markdown_Parser.prototype.doBlockQuotes=function(a){var b=this;return a=a.replace(new RegExp("((?:^[ ]*>[ ]?.+\\n(.+\\n)*\\n*)+)","mg"),function(a,c){return c=c.replace(/^[ ]*>[ ]?|^[ ]+$/gm,""),c=b.runBlockGamut(c),c=c.replace(/^/gm,"  "),c=c.replace(/(\\s*<pre>[\\s\\S]+?<\/pre>)/gm,function(a,b){return b=b.replace(/^  /m,"")}),"\n"+b.hashBlock("<blockquote>\n"+c+"\n</blockquote>")+"\n\n"})},Markdown_Parser.prototype.formParagraphs=function(a){a=this.__wrapSTXETX__(a),a=a.replace(/(?:\x02)\n+|\n+(?:\x03)/g,""),a=this.__unwrapSTXETX__(a);for(var b=a.split(/\n{2,}/m),c=0;c<b.length;c++){var d=b[c];if(""==d);else if(d.match(/^B\x1A[0-9]+B$/)){var e=d,f=this.html_hashes[e];e=f,b[c]=e}else d=this.runSpanGamut(d),d=d.replace(/^([ ]*)/,"<p>"),d+="</p>",b[c]=this.unhash(d)}return b.join("\n\n")},Markdown_Parser.prototype.encodeAttribute=function(a){return a=this.encodeAmpsAndAngles(a),a=a.replace(/"/g,"&quot;")},Markdown_Parser.prototype.encodeAmpsAndAngles=function(a){return a=this.no_entities?a.replace(/&/g,"&amp;"):a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/,"&amp;"),a=a.replace(/</g,"&lt;")},Markdown_Parser.prototype.doAutoLinks=function(a){var b=this;return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/i,function(a,c){var d=b.encodeAttribute(c),e='<a href="'+d+'">'+d+"</a>";return b.hashPart(e)}),a=a.replace(new RegExp('<(?:mailto:)?((?:[-!#$%&\'*+/=?^_`.{|}~\\w\\x80-\\xFF]+|".*?")\\@(?:[-a-z0-9\\x80-\\xFF]+(\\.[-a-z0-9\\x80-\\xFF]+)*\\.[a-z]+|\\[[\\d.a-fA-F:]+\\]))>',"i"),function(a,c){var d=b.encodeEmailAddress(c);return b.hashPart(d)})},Markdown_Parser.prototype.encodeEmailAddress=function(a){function b(a){var b=0;b=-1^b;for(var d=0;d<a.length;++d){var e=255&(b^a.charCodeAt(d)),f="0x"+c[e];b=b>>>8^f}return(-1^b)>>>0}"undefined"==typeof arguments.callee.crctable&&(arguments.callee.crctable="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF "+"B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".split(" "));var c=arguments.callee.crctable;a="mailto:"+a;var d,e=[];for(d=0;d<a.length;d++)e.push(a.charAt(d));var f=Math.floor(Math.abs(b(a)/a.length));for(d=0;d<e.length;d++){var g=e[d],h=g.charCodeAt(0);if(128>h){var i=f*(1+d)%100;i>90&&"@"!=g||(e[d]=45>i?"&#x"+h.toString(16)+";":"&#"+h.toString(10)+";")}}a=e.join("");var j=e.splice(7,e.length-1).join("");return a='<a href="'+a+'">'+j+"</a>"},Markdown_Parser.prototype.parseSpan=function(a){for(var b="",c=new RegExp("(\\\\"+this.escape_chars_re+"|`+"+(this.no_markup?"":"|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<[/!$]?[-a-zA-Z0-9:_]+(?=\\s(?=[^\"'>]+|\"[^\"]*\"|'[^']*')*)?>")+")");;){var d=a.match(c);if(!d){b+=a;break}if(RegExp.leftContext&&(b+=RegExp.leftContext),"`"!=RegExp.lastMatch.charAt(0)||"\\"!=RegExp.leftContext.charAt(RegExp.leftContext.length-1)){var e=this.handleSpanToken(RegExp.lastMatch,RegExp.rightContext);b+=e[0],a=e[1]}else b+=RegExp.lastMatch,a=RegExp.rightContext}return b},Markdown_Parser.prototype.handleSpanToken=function(a,b){switch(a.charAt(0)){case"\\":return[this.hashPart("&#"+a.charCodeAt(1)+";"),b];case"`":if(b.match(new RegExp("^([\\s\\S]*?[^`])"+this._php_preg_quote(a)+"(?!`)([\\s\\S]*)$","m"))){var c=RegExp.$1;b=RegExp.$2;var d=this.makeCodeSpan(c);return[this.hashPart(d),b]}return[a,b];default:return[this.hashPart(a),b]}},Markdown_Parser.prototype.outdent=function(a){return a.replace(new RegExp("^(\\t|[ ]{1,"+this.tab_width+"})","mg"),"")},Markdown_Parser.prototype.detab=function(a){var b=this;return a.replace(/^.*\t.*$/gm,function(a){var c=a.split("	");a=c.shift();for(var d=0;d<c.length;d++){var e=c[d],f=b.tab_width-a.length%b.tab_width;a+=b._php_str_repeat(" ",f)+e}return a})},Markdown_Parser.prototype.unhash=function(a){var b=this;return a.replace(/(.)\x1A[0-9]+\1/g,function(a){return b.html_hashes[a]})},MarkdownExtra_Parser.prototype=new Markdown_Parser,MarkdownExtra_Parser.prototype.setup=function(){this.constructor.prototype.setup.call(this),this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.footnote_counter=1;for(var a in this.predef_abbr){var b=this.predef_abbr[a];""!=this.abbr_word_re&&(this.abbr_word_re+="|"),this.abbr_word_re+=this._php_preg_quote(a),this.abbr_desciptions[a]=this._php_trim(b)}},MarkdownExtra_Parser.prototype.teardown=function(){this.footnotes={},this.footnotes_ordered=[],this.abbr_desciptions={},this.abbr_word_re="",this.constructor.prototype.teardown.call(this)},MarkdownExtra_Parser.prototype.hashHTMLBlocks=function(a){var b=this._hashHTMLBlocks_inMarkdown(a);return a=b[0]},MarkdownExtra_Parser.prototype._hashHTMLBlocks_inMarkdown=function(a,b,c,d){if("undefined"==typeof b&&(b=0),"undefined"==typeof c&&(c=""),"undefined"==typeof d&&(d=!1),""===a)return["",""];var e,f=/(?:^\n?|\n\n)*$/,g=new RegExp("^([ ]*<!--.*?-->)?[ ]*\\n","m"),h=new RegExp("(</?("+this.block_tags_re+"|"+this.context_block_tags_re+"|"+this.clean_tags_re+"|(?!\\s)"+c+")(?:(?=[\\s\"'/a-zA-Z0-9])(\".*?\"|'.*?'|.+?)*?)?>|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<!\\[CDATA\\[.*?\\]\\]>|`+"+(d?"":"|(?:^[ ]*\\n|^|\\n[ ]*\\n)[ ]{"+(b+4)+"}[^\\n]*\\n(?=(?:[ ]{"+(b+4)+"}[^\\n]*|[ ]*)\\n)*|(?:^|\\n)[ ]{0,"+b+"}~~~+[ ]*\\n")+")","m"),i=0,j="";do{var k,l=a.match(h);if(k=l?[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext]:[a],d){var m=this.hashPart("",":"),n=m+"\n";k[0]=m+k[0].replace(/\n/g,n)+m}if(j+=k[0],!l){a="";break}var o=k[1];a=k[2];var p,q,r=this._php_preg_quote(o);if("`"==o.charAt(0))r=this._php_preg_quote(o),-1!=a.substr(1).indexOf("`")&&(e=a.match(new RegExp("^(.+?|\\n[^\\n])*?[^`]"+r+"[^`]")))?(j+=o+e[0],a=a.substr(e[0].length)):j+=o;else if(o.match(new RegExp("^\\n?[ ]{0,"+(b+3)+"}~")))r=this._php_preg_quote(this._php_trim(o)),(e=a.match(new RegExp("^(?:.*\\n)+?[ ]{0,"+b+"}"+r+"[ ]*\\n")))?(j+=o+e[0],a=a.substr(e[0].length)):j+=o;else if("\n"==o.charAt(0)||" "==o.charAt(0))j+=o;else if(o.match(new RegExp("^<(?:"+this.block_tags_re+")\\b"))||o.match(new RegExp("^<(?:"+this.context_block_tags_re+")\\b"))&&j.match(f)&&a.match(g))p=this._hashHTMLBlocks_inHTML(o+a,this.hashBlock,!0),q=p[0],a=p[1],j+="\n\n"+q+"\n\n";else if(o.match(new RegExp("^<(?:"+this.clean_tags_re+")\\b"))||"!"==o.charAt(1)||"?"==o.charAt(1))p=this._hashHTMLBlocks_inHTML(o+a,this.hashClean,!1),q=p[0],a=p[1],j+=q;else if(""!==c&&o.match(new RegExp("^</?(?:"+c+")\\b"))){if("/"==o.charAt(1)?i--:"/"!=o.charAt(o.length-2)&&i++,0>i){a=o+a;break}j+=o}else j+=o}while(i>=0);return[j,a]},MarkdownExtra_Parser.prototype._hashHTMLBlocks_inHTML=function(a,b,c){if(""===a)return["",""];var d,e=new RegExp("\\s*markdown\\s*=\\s*(?:([\"'])(.*?)\\1|([^\\s>]*))()"),f=new RegExp("(</?[\\w:$]+(?:(?=[\\s\"'/a-zA-Z0-9])(?:\".*?\"|'.*?'|.+?)*?)?>|<!--.*?-->|<\\?.*?\\?>|<%.*?%>|<!\\[CDATA\\[.*?\\]\\]>)"),g=a,h=0,i="",j="",k="";(d=a.match(/^<([\w:$]*)\b/))&&(k=d[1]);do{var l=a.match(f);if(!l)return[g.charAt(0),g.substr(1)];var m=[RegExp.leftContext,RegExp.lastMatch,RegExp.rightContext];i+=m[0];var n=m[1];if(a=m[2],n.match(new RegExp("^</?(?:"+this.auto_close_tags_re+")\\b"))||"!"==n.charAt(1)||"?"==n.charAt(1))i+=n;
else{n.match(new RegExp("^</?"+k+"\\b"))&&("/"==n.charAt(1)?h--:"/"!=n.charAt(n.length-2)&&h++);var o;if(c&&(o=n.match(e))&&(o[2]+o[3]).match(/^1|block|span$/)){n=n.replace(e,""),this.mode=o[2]+o[3];var p,q="span"==this.mode||"block"!=this.mode&&n.match(new RegExp("^<(?:"+this.contain_span_tags_re+")\\b"));p=(d=i.match(/(?:^|\n)( *?)(?! ).*?$/))?d[1].length:0,i+=n,j+=b.call(this,i),d=n.match(/^<([\w:$]*)\b/);var r=d[1],s=this._hashHTMLBlocks_inMarkdown(a,p,r,q);i=s[0],a=s[1],p>0&&(i=i.replace(new RegExp("/^[ ]{1,"+p+"}","m"),"")),j+=q?i:"\n\n"+i+"\n\n",i=""}else i+=n}}while(h>0);return j+=b.call(this,i),[j,a]},MarkdownExtra_Parser.prototype.hashClean=function(a){return this.hashPart(a,"C")},MarkdownExtra_Parser.prototype.doHeaders=function(a){function b(a){return"undefined"==typeof a||""==a?"":' id="'+a+'"'}var c=this;return a=a.replace(new RegExp("(^.+?)(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?[ ]*\\n(=+|-+)[ ]*\\n+","mg"),function(a,d,e,f){if("-"==f&&d.match(/^- /))return a;var g="="==f.charAt(0)?1:2,h=b(e),i="<h"+g+h+">"+c.runSpanGamut(d)+"</h"+g+">";return"\n"+c.hashBlock(i)+"\n\n"}),a=a.replace(new RegExp("^(\\#{1,6})[ ]*(.+?)[ ]*\\#*(?:[ ]+\\{\\#([-_:a-zA-Z0-9]+)\\})?\\n+","mg"),function(a,d,e,f){var g=d.length,h=b(f),i="<h"+g+h+">"+c.runSpanGamut(e)+"</h"+g+">";return"\n"+c.hashBlock(i)+"\n\n"})},MarkdownExtra_Parser.prototype.doTables=function(a){var b=this,c=this.tab_width-1,d=function(a,c,d,e){c=c.replace(/[|] *$/m,""),d=d.replace(/[|] *$/m,""),e=e.replace(/[|] *$/m,"");var f,g=[],h=d.split(/[ ]*[|][ ]*/);for(f=0;f<h.length;f++){var i=h[f];g[f]=i.match(/^ *-+: *$/)?' align="right"':i.match(/^ *:-+: *$/)?' align="center"':i.match(/^ *:-+ *$/)?' align="left"':""}c=b.parseSpan(c);var j=c.split(/ *[|] */),k=j.length,l="<table>\n";for(l+="<thead>\n",l+="<tr>\n",f=0;f<j.length;f++){var m=j[f];l+="  <th"+g[f]+">"+b.runSpanGamut(b._php_trim(m))+"</th>\n"}l+="</tr>\n",l+="</thead>\n";var n=b._php_trim(e,"\n").split("\n");l+="<tbody>\n";for(var o=0;o<n.length;o++){var p=n[o];p=b.parseSpan(p);for(var q=p.split(/ *[|] */,k);q.length<k;)q.push("");for(l+="<tr>\n",f=0;f<q.length;f++){var r=q[f];l+="  <td"+g[f]+">"+b.runSpanGamut(b._php_trim(r))+"</td>\n"}l+="</tr>\n"}return l+="</tbody>\n",l+="</table>",b.hashBlock(l)+"\n"};return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("^[ ]{0,"+c+"}[|](.+)\\n[ ]{0,"+c+"}[|]([ ]*[-:]+[-| :]*)\\n((?:[ ]*[|].*\\n)*)(?=\\n|\\x03)","mg"),function(a,b,c,e){return e=e.replace(/^ *[|]/m,""),d.call(this,a,b,c,e)}),a=a.replace(new RegExp("^[ ]{0,"+c+"}(\\S.*[|].*)\\n[ ]{0,"+c+"}([-:]+[ ]*[|][-| :]*)\\n((?:.*[|].*\\n)*)(?=\\n|\\x03)","mg"),d),a=this.__unwrapSTXETX__(a)},MarkdownExtra_Parser.prototype.doDefLists=function(a){var b=this,c=this.tab_width-1,d="(?:(([ ]{0,"+c+"}((?:[ \\t]*\\S.*\\n)+)\\n?[ ]{0,"+c+"}:[ ]+)([\\s\\S]+?)((?=\\0x03)|(?=\\n{2,}(?=\\S)(?![ ]{0,"+c+"}(?:\\S.*\\n)+?\\n?[ ]{0,"+c+"}:[ ]+)(?![ ]{0,"+c+"}:[ ]+)))))";return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("(\\x02\\n?|\\n\\n)"+d,"mg"),function(a,c,d){var e=b._php_trim(b.processDefListItems(d));return e="<dl>\n"+e+"\n</dl>",c+b.hashBlock(e)+"\n\n"}),a=this.__unwrapSTXETX__(a)},MarkdownExtra_Parser.prototype.processDefListItems=function(a){var b=this,c=this.tab_width-1;return a=this.__wrapSTXETX__(a),a=a.replace(/\n{2,}(?=\\x03)/,"\n"),a=a.replace(new RegExp("(\\x02\\n?|\\n\\n+)([ ]{0,"+c+"}(?![:][ ]|[ ])(?:\\S.*\\n)+?)(?=\\n?[ ]{0,3}:[ ])","mg"),function(a,c,d){for(var e=b._php_trim(d).split("\n"),f="",g=0;g<e.length;g++){var h=e[g];h=b.runSpanGamut(b._php_trim(h)),f+="\n<dt>"+h+"</dt>"}return f+"\n"}),a=a.replace(new RegExp("\\n(\\n+)?([ ]{0,"+c+"}[:][ ]+)([\\s\\S]+?)(?=\\n*(?:\\n[ ]{0,"+c+"}[:][ ]|<dt>|\\x03))","mg"),function(a,c,d,e){return c||e.match(/\n{2,}/)?(e=b._php_str_repeat(" ",d.length)+e,e=b.runBlockGamut(b.outdent(e+"\n\n")),e="\n"+e+"\n"):(e=b._php_rtrim(e),e=b.runSpanGamut(b.outdent(e))),"\n<dd>"+e+"</dd>\n"}),a=this.__unwrapSTXETX__(a)},MarkdownExtra_Parser.prototype.doFencedCodeBlocks=function(a){{var b=this;this.tab_width}return a=this.__wrapSTXETX__(a),a=a.replace(new RegExp("(?:\\n|\\x02)(~{3,})[ ]*\\n((?:(?!\\1[ ]*\\n).*\\n+)+)\\1[ ]*\\n","mg"),function(a,c,d){return d=b._php_htmlspecialchars_ENT_NOQUOTES(d),d=d.replace(/^\n+/,function(a){return b._php_str_repeat("<br"+b.empty_element_suffix,a.length)}),d="<pre><code>"+d+"</code></pre>","\n\n"+b.hashBlock(d)+"\n\n"}),a=this.__unwrapSTXETX__(a)},MarkdownExtra_Parser.prototype.formParagraphs=function(a){a=this.__wrapSTXETX__(a),a=a.replace(/(?:\x02)\n+|\n+(?:\x03)/g,""),a=this.__unwrapSTXETX__(a);for(var b=a.split(/\n{2,}/m),c=0;c<b.length;c++){var d=b[c];if(""!=d){d=this._php_trim(this.runSpanGamut(d));var e=!d.match(/^B\x1A[0-9]+B|^C\x1A[0-9]+C$/);e&&(d="<p>"+d+"</p>"),b[c]=d}}return a=b.join("\n\n"),a=this.unhash(a)},MarkdownExtra_Parser.prototype.stripFootnotes=function(a){var b=this,c=this.tab_width-1;return a=a.replace(new RegExp("^[ ]{0,"+c+"}\\[\\^(.+?)\\][ ]?:[ ]*\\n?((?:.+|\\n(?!\\[\\^.+?\\]:\\s)(?!\\n+[ ]{0,3}\\S))*)","mg"),function(a,c,d){var e=b.fn_id_prefix+c;return b.footnotes[e]=b.outdent(d),""})},MarkdownExtra_Parser.prototype.doFootnotes=function(a){return this.in_anchor||(a=a.replace(/\[\^(.+?)\]/g,"Ffn:$1:")),a},MarkdownExtra_Parser.prototype.appendFootnotes=function(a){var b=this,c=function(a,c){var d=b.fn_id_prefix+c;if(d in b.footnotes){b.footnotes_ordered.push([d,b.footnotes[d]]),delete b.footnotes[d];var e=b.footnote_counter++,f=' rel="footnote"';if(""!=b.fn_link_class){var g=b.fn_link_class;g=b.encodeAttribute(g),f+=' class="'+g+'"'}if(""!=b.fn_link_title){var h=b.fn_link_title;h=b.encodeAttribute(h),f+=' title="'+h+'"'}return f=f.replace(/%%/g,e),d=b.encodeAttribute(d),'<sup id="fnref:'+d+'"><a href="#fn:'+d+'"'+f+">"+e+"</a></sup>"}return"[^"+c+"]"};if(a=a.replace(/F\x1Afn:(.*?)\x1A:/g,c),this.footnotes_ordered.length>0){a+="\n\n",a+='<div class="footnotes">\n',a+="<hr"+this.empty_element_suffix+"\n",a+="<ol>\n\n";var d=' rev="footnote"';if(""!=this.fn_backlink_class){var e=this.fn_backlink_class;e=this.encodeAttribute(e),d+=' class="'+e+'"'}if(""!=this.fn_backlink_title){var f=this.fn_backlink_title;f=this.encodeAttribute(f),d+=' title="'+f+'"'}for(var g=0;this.footnotes_ordered.length>0;){var h=this.footnotes_ordered.shift(),i=h[0],j=h[1];j+="\n",j=this.runBlockGamut(j+"\n"),j=j.replace(/F\x1Afn:(.*?)\x1A:/g,c),d=d.replace(/%%/g,++g),i=this.encodeAttribute(i);var k='<a href="#fnref:'+i+'"'+d+">&#8617;</a>";j.match(/<\/p>$/)?j=j.substr(0,j.length-4)+"&#160;"+k+"</p>":j+="\n\n<p>"+k+"</p>",a+='<li id="fn:'+i+'">\n',a+=j+"\n",a+="</li>\n\n"}a+="</ol>\n",a+="</div>"}return a},MarkdownExtra_Parser.prototype.stripAbbreviations=function(a){var b=this,c=this.tab_width-1;return a=a.replace(new RegExp("^[ ]{0,"+c+"}\\*\\[(.+?)\\][ ]?:(.*)","m"),function(a,c,d){return""!=b.abbr_word_re&&(b.abbr_word_re+="|"),b.abbr_word_re+=b._php_preg_quote(c),b.abbr_desciptions[c]=b._php_trim(d),""})},MarkdownExtra_Parser.prototype.doAbbreviations=function(a){var b=this;return this.abbr_word_re&&(a=a.replace(new RegExp("(^|[^\\w\\x1A])("+this.abbr_word_re+")(?![\\w\\x1A])"),function(a,c,d){if(d in b.abbr_desciptions){var e=b.abbr_desciptions[d];return e&&""!=e?(e=b.encodeAttribute(e),b.hashPart('<abbr title="'+e+'">'+d+"</abbr>")):b.hashPart("<abbr>"+d+"</abbr>")}return a})),a},this.Markdown=Markdown,this.Markdown_Parser=Markdown_Parser,this.MarkdownExtra_Parser=MarkdownExtra_Parser;