<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        
        <link rel="stylesheet" type="text/css" href="example.css">
        <link rel="stylesheet" type="text/css" href="../src/lyme.css">
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Fjalla+One&subset=latin,latin-ext">
    </head>
    <body>
        <div id="content">
            <input type="button" id="source-button" name="source-button" value="Show Source">
            
            <div id="lyme"></div>
        </div>
        
        <div id="overlay"></div>
        <div id="source">
            <textarea id="markdown" rows="10" cols="10">
# Welcome to LYME

LYME stands for **Low Key Markdown Editor** and guess what, it's simply that. LYME aims to stay in the background and and provide you with a distraction-free interface for writing text. 

## Editor

### Blocks

The given text is split into blocks. A block is denoted by two line breaks. You can click any block to edit it. As soon as you leave a block the `onTextChange()` function is called.

### Hot Keys

If you're editing a block you can use the following hot keys to navigate the editor:

&lt;table&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + DOWN ARROW&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Move to the next block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + UP ARROW&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Move to the previous block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + BACKSPACE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Delete the current block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + RETURN&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Add new block below the current block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + SHIFT + DOWN ARROW&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Place the current block after the next block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRL + ALT + SHIFT + UP ARROW&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Place the current block before the previous block.&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;ESCAPE&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Leave the current block.&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

### Formatting

As implied by the name, LYME uses markdown to convert text into HTML. Besides that, LYME provides some little helpers like support for indention.

## Integration

### Initialization

Here is some sample code that initializes a LYME editor.

    &lt;script src="/lib/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="/lib/showdown.min.js"&gt;&lt;/script&gt;
    &lt;script src="/src/jquery.lyme.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        $('#lyme').lyme({
            text : '# Some Markdown Text',
            onTextChange : function(text) {
                console.log(text);
            }
        });
    &lt;/script&gt;

What you decide to do on the `onTextChange()` call is up to you. You can look at the code of this page to see how you can easily read and update a textarea element.

### Plugins

You can register plugins (simple objects) with callback functions which are called on various events. The most important one you've already seen in the previous example: The `onTextChange` option is just a wrapper for a plugin with only the `onTextChange` event.

`onTextChange(string text) void`  
Called when the Markdown of a block was updated.

`onTextToHtmlConversion(string text) string`  
Called when the Markdown is converted to the HTML. Must return a string containing the HTML.

`onPreStartEditing($.jQuery $block) void`  
Called when a block is about to go into edit mode. 

`onPostStartEditing($.jQuery $block) void`  
Called when a block went into edit mode successfully.
            </textarea>
        </div>
        
        <!-- jQuery -->
        <script src="../lib/jquery.min.js"></script>
        
        <!-- LYME -->
        <script src="../src/jquery.lyme.js"></script>
        
        <!-- Dependencies -->
        <script src="../lib/showdown.min.js"></script>
        <script src="../lib/jquery.scroll-to-1.4.2.min.js"></script>
        
        <script>
            $(function() {
                $('#lyme').lyme({
                    text : $.trim($('#markdown').text()),
                    onTextChange : function(text) {
                        $('#markdown').val(text);
                    }
                });
                
                $('#overlay').on('click', function() {
                    $('#overlay,#source').hide();
                });
                
                $('#source-button').on('click', function() {
                    $('#overlay,#source').show();
                });
            });
        </script>
    </body>
</html>