<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        
        <link rel="stylesheet" type="text/css" href="example.css">
        <link rel="stylesheet" type="text/css" href="../src/lyme.css">
        <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Fjalla+One&subset=latin,latin-ext">
    </head>
    <body>
        <div id="content">
            <input type="button" id="source-button" name="source-button" value="Show Markup">
            <div id="lyme"></div>
        </div>
        
        <div id="overlay"></div>
        
        <div id="markup">
<textarea rows="10" cols="10"># Welcome to LYME

LYME stands for **&lt;u&gt;L&lt;/u&gt;ow Ke&lt;u&gt;y&lt;/u&gt; &lt;u&gt;M&lt;/u&gt;arkup &lt;u&gt;E&lt;/u&gt;ditor** and guess what, it's simply that. LYME aims to stay in the background and provide you with a distraction-free interface for writing text in your favorite markup language. 

## Editor

### Structure

The given text - or markup - is split into blocks. A block is delimited by two line breaks. Think of it as a paragraph. You can click any block to start editing. **Just try it and click this text.** As soon as you leave a block the `onMarkupChange` callback is invoked.

### Markup Languages

LYME ships with the following renderers:

Markup Language  | Library Dependencies                                                                                  | Renderer
---------------- | ------------------------------------------------------------------------------------------------------|-----------------------------------
Markdown         | `lib/showdown.min.js` ([Showdown](https://github.com/coreyti/showdown))                               | `$.fn.renderers.Showdown()`
Markdown Extra   | `lib/js-markdown-extra.js` ([JS Markdown Extra](https://github.com/tanakahisateru/js-markdown-extra)) | `$.fn.renderers.JSMarkdownExtra()`

But don't worry, you can overwrite the `renderer` option and thus use any markup to HTML transformation you want. 

### Hot Keys

If you're editing a block you can use the following hot keys to navigate the editor:

Key Combination                   | Effect
----------------------------------|---------------------------
`TAB`                             | Indents code by 4 spaces.
`CTRL + ALT + DOWN ARROW`         | Moves to the next block.
`CTRL + ALT + UP ARROW`           | Moves to the previous block.
`CTRL + ALT + BACKSPACE`          | Deletes the current block.
`CTRL + ALT + RETURN`             | Adds new block below the current block.
`CTRL + ALT + SHIFT + DOWN ARROW` | Places the current block after the next block.
`CTRL + ALT + SHIFT + UP ARROW`   | Places the current block before the previous block.
`ESCAPE`                          | Leaves the current block / exits the editor.

You can provide your own hot keys if you wish. Have a look at the `$.fn.lyme.hotKeys` object and the `hotKeys` option.

Some hot keys, like `TAB`, are configurable:

~~~
$.fn.lyme.hotKeys.tabbing.indentation = "\t"; // Use TAB
$.fn.lyme.hotKeys.tabbing.indentation = '  '; // Use two spaces
~~~


## Integration

### Initialization

Here is some sample code that initializes a LYME editor.

~~~
&lt;scr ipt src="/lib/jquery.min.js"&gt;&lt;/script&gt;
&lt;scr ipt src="/lib/js-markdown-extra.js"&gt;&lt;/script&gt;
&lt;scr ipt src="/src/jquery.lyme.js"&gt;&lt;/script&gt;
&lt;scr ipt&gt;
    $('#lyme').lyme({
        text : '# Some Markup Text',
        onMarkupChange : function(markup, html) {
            console.log(markup, html);
        }
    });
&lt;/script&gt;
~~~

LYME provides a shortcut to read and write to a textarea element. Just provide the selected element as the `text` option and LYME will automatically setup a plugin to update the element whenever the markup changes.

~~~
$('#lyme').lyme({
    text : $('#markup')
});
~~~


### Plugins

You can register plugins (plain objects) with callback functions which are invoked on various events.

`onMarkupChange(string markup, string html)`  
Called when the markup of a block was updated. Returns the markup and HTML of all blocks.

`onBlockChange(string markup, string html)`  
Called when the markup of a block was updated. Returns the markup and HTML of the edited block.

`onPreStartEditing($.fn.lyme.Block $block)`  
Called when a block is about to go into edit mode. 

`onPostStartEditing($.fn.lyme.Block block)`  
Called after a block went into edit mode.


### Renderers

Renderers transform Markup into HTML. LYME uses Showdown per default, but you can plug in any renderer you want. Just pass in an object providing a `render(string markup) string` function as the `renderer` option.

~~~
$('#lyme').lyme({
    renderer : {
        render: function(markup) {
            var html = ...;
            return html;
        }
    }
});
~~~</textarea>
        </div>
        
        <!-- jQuery -->
        <script src="../lib/jquery.min.js"></script>
        
        <!-- LYME -->
        <script src="../src/jquery.lyme.js"></script>
        
        <!-- Dependencies -->
        <script src="../lib/js-markdown-extra.js"></script>
        <script src="../lib/jquery.scroll-to-1.4.2.min.js"></script>
        
        <script>
            $(function() {
                MARKDOWN_EMPTY_ELEMENT_SUFFIX = '>';
                
                $('#lyme').lyme({
                    text : $('#markup textarea')
                });
                
                $('#overlay').on('click', function() {
                    $('#overlay,#markup').hide();
                });
                
                $('#source-button').on('click', function() {
                    $('#overlay,#markup').show();
                });
            });
        </script>
    </body>
</html>